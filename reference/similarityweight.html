<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Calculate the similarity weight for a set of observations — similarityweight • condvis2</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Calculate the similarity weight for a set of observations — similarityweight" />
<meta property="og:description" content="Calculate the similarity weight for a set of observations, based
on their distance from some arbitrary points in data space. Observations which
are very similar to the point under consideration are given weight 1, while
observations which are dissimilar to the point are given weight zero." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">condvis2</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Keras.html">Exploring keras models with condvis2</a>
    </li>
    <li>
      <a href="../articles/introduction.html">Introduction to condvis2</a>
    </li>
    <li>
      <a href="../articles/mclust.html">Exploring model-based clustering with condvis2</a>
    </li>
    <li>
      <a href="../articles/mlr.html">mlr fits and condvis2</a>
    </li>
    <li>
      <a href="../articles/parsnip.html">parsnip fits and condvis2</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/cbhurley/condvis2/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Calculate the similarity weight for a set of observations</h1>
    <small class="dont-index">Source: <a href='https://github.com/cbhurley/condvis2/blob/master/R/similarityweight.R'><code>R/similarityweight.R</code></a></small>
    <div class="hidden name"><code>similarityweight.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Calculate the similarity weight for a set of observations, based
on their distance from some arbitrary points in data space. Observations which
are very similar to the point under consideration are given weight 1, while
observations which are dissimilar to the point are given weight zero.</p>
    </div>

    <pre class="usage"><span class='fu'>similarityweight</span><span class='op'>(</span>
  <span class='va'>x</span>,
  <span class='va'>data</span>,
  threshold <span class='op'>=</span> <span class='fl'>1</span>,
  distance <span class='op'>=</span> <span class='st'>"euclidean"</span>,
  lambda <span class='op'>=</span> <span class='cn'>NULL</span>,
  scale <span class='op'>=</span> <span class='cn'>TRUE</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>A dataframe describing arbitrary points in the space of the data
(i.e., with same <code>colnames</code> as <code>data</code>).</p></td>
    </tr>
    <tr>
      <th>data</th>
      <td><p>A dataframe representing observed data.</p></td>
    </tr>
    <tr>
      <th>threshold</th>
      <td><p>Threshold distance outside which observations will
be assigned similarity weight zero. This is numeric and should be &gt; 0.
Defaults to 1.</p></td>
    </tr>
    <tr>
      <th>distance</th>
      <td><p>The type of distance measure to be used, currently just three
types of Minkowski distance: <code>"euclidean"</code> (default),
<code>"maxnorm"</code>, <code>"manhattan"</code> and also <code>"gower"</code></p></td>
    </tr>
    <tr>
      <th>lambda</th>
      <td><p>A constant to multiply by the number of categorical
mismatches, before adding to the Minkowski distance, to give a general
dissimilarity measure. If left <code>NULL</code>, behaves as though <code>lambda</code>
is set larger than <code>threshold</code>, meaning that one factor mismatch
guarantees zero weight.</p></td>
    </tr>
    <tr>
      <th>scale</th>
      <td><p>defaults to TRUE, in which case numeric variables are scaled to unit sd.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A numeric vector or matrix, with values from 0 to 1. The similarity
  weights for the observations in <code>data</code> arranged in rows for each row
  in <code>x</code>.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Similarity weight is assigned to observations based on their
  distance from a given point. The distance is calculated as Minkowski
  distance between the numeric elements for the observations whose
  categorical elements match, or else the Gower distance.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>O'Connell M, Hurley CB and Domijan K (2017). ``Conditional
  Visualization for Statistical Models: An Introduction to the
  <strong>condvis</strong> Package in R.''<em>Journal of Statistical Software</em>,
  <strong>81</strong>(5), pp. 1-20. &lt;URL:http://dx.doi.org/10.18637/jss.v081.i05&gt;.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>## Say we want to find observations similar to the first observation.</span>
<span class='co'>## The first observation is identical to itself, so it gets weight 1. The</span>
<span class='co'>## second observation is similar, so it gets some weight. The rest are more</span>
<span class='co'>## different, and so get zero weight.</span>

<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='va'>mtcars</span><span class='op'>)</span>
<span class='fu'>similarityweight</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>mtcars</span><span class='op'>[</span><span class='fl'>1</span>, <span class='op'>]</span>, data <span class='op'>=</span> <span class='va'>mtcars</span><span class='op'>)</span>
</div><div class='output co'>#&gt;           Mazda RX4       Mazda RX4 Wag          Datsun 710      Hornet 4 Drive 
#&gt;           1.0000000           0.5924101           0.0000000           0.0000000 
#&gt;   Hornet Sportabout             Valiant          Duster 360           Merc 240D 
#&gt;           0.0000000           0.0000000           0.0000000           0.0000000 
#&gt;            Merc 230            Merc 280           Merc 280C          Merc 450SE 
#&gt;           0.0000000           0.0000000           0.0000000           0.0000000 
#&gt;          Merc 450SL         Merc 450SLC  Cadillac Fleetwood Lincoln Continental 
#&gt;           0.0000000           0.0000000           0.0000000           0.0000000 
#&gt;   Chrysler Imperial            Fiat 128         Honda Civic      Toyota Corolla 
#&gt;           0.0000000           0.0000000           0.0000000           0.0000000 
#&gt;       Toyota Corona    Dodge Challenger         AMC Javelin          Camaro Z28 
#&gt;           0.0000000           0.0000000           0.0000000           0.0000000 
#&gt;    Pontiac Firebird           Fiat X1-9       Porsche 914-2        Lotus Europa 
#&gt;           0.0000000           0.0000000           0.0000000           0.0000000 
#&gt;      Ford Pantera L        Ferrari Dino       Maserati Bora          Volvo 142E 
#&gt;           0.0000000           0.0000000           0.0000000           0.0000000 </div><div class='input'>
<span class='co'>## By increasing the threshold, we can find observations which are more</span>
<span class='co'>## approximately similar to the first row. Note that the second observation</span>
<span class='co'>## now has weight 1, so we lose some ability to discern how similar</span>
<span class='co'>## observations are by increasing the threshold.</span>

<span class='fu'>similarityweight</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>mtcars</span><span class='op'>[</span><span class='fl'>1</span>, <span class='op'>]</span>, data <span class='op'>=</span> <span class='va'>mtcars</span>, threshold <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span>
</div><div class='output co'>#&gt;           Mazda RX4       Mazda RX4 Wag          Datsun 710      Hornet 4 Drive 
#&gt;         1.000000000         0.918482015         0.351387122         0.119726982 
#&gt;   Hornet Sportabout             Valiant          Duster 360           Merc 240D 
#&gt;         0.223929163         0.031252099         0.162084244         0.200548806 
#&gt;            Merc 230            Merc 280           Merc 280C          Merc 450SE 
#&gt;         0.016452494         0.372445765         0.341439906         0.228739296 
#&gt;          Merc 450SL         Merc 450SLC  Cadillac Fleetwood Lincoln Continental 
#&gt;         0.254706565         0.228247461         0.000000000         0.000000000 
#&gt;   Chrysler Imperial            Fiat 128         Honda Civic      Toyota Corolla 
#&gt;         0.000000000         0.195133880         0.189331752         0.131099997 
#&gt;       Toyota Corona    Dodge Challenger         AMC Javelin          Camaro Z28 
#&gt;         0.133932725         0.178208426         0.247953822         0.176162810 
#&gt;    Pontiac Firebird           Fiat X1-9       Porsche 914-2        Lotus Europa 
#&gt;         0.165570572         0.277782788         0.481028156         0.288120874 
#&gt;      Ford Pantera L        Ferrari Dino       Maserati Bora          Volvo 142E 
#&gt;         0.275217274         0.556533264         0.004848661         0.418874538 </div><div class='input'>
<span class='co'>## Can provide a number of points to 'x'. Here we see that the Mazda RX4 Wag</span>
<span class='co'>## is more similar to the Merc 280 than the Mazda RX4 is.</span>

<span class='fu'>similarityweight</span><span class='op'>(</span><span class='va'>mtcars</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>2</span>, <span class='op'>]</span>, <span class='va'>mtcars</span>, threshold <span class='op'>=</span> <span class='fl'>3</span><span class='op'>)</span>
</div><div class='output co'>#&gt;               Mazda RX4 Mazda RX4 Wag Datsun 710 Hornet 4 Drive
#&gt; Mazda RX4     1.0000000     0.8641367          0              0
#&gt; Mazda RX4 Wag 0.8641367     1.0000000          0              0
#&gt;               Hornet Sportabout Valiant Duster 360 Merc 240D Merc 230
#&gt; Mazda RX4                     0       0          0         0        0
#&gt; Mazda RX4 Wag                 0       0          0         0        0
#&gt;                  Merc 280 Merc 280C Merc 450SE Merc 450SL Merc 450SLC
#&gt; Mazda RX4     0.000000000         0          0          0           0
#&gt; Mazda RX4 Wag 0.003922046         0          0          0           0
#&gt;               Cadillac Fleetwood Lincoln Continental Chrysler Imperial Fiat 128
#&gt; Mazda RX4                      0                   0                 0        0
#&gt; Mazda RX4 Wag                  0                   0                 0        0
#&gt;               Honda Civic Toyota Corolla Toyota Corona Dodge Challenger
#&gt; Mazda RX4               0              0             0                0
#&gt; Mazda RX4 Wag           0              0             0                0
#&gt;               AMC Javelin Camaro Z28 Pontiac Firebird Fiat X1-9 Porsche 914-2
#&gt; Mazda RX4               0          0                0         0     0.1350469
#&gt; Mazda RX4 Wag           0          0                0         0     0.1136252
#&gt;               Lotus Europa Ford Pantera L Ferrari Dino Maserati Bora Volvo 142E
#&gt; Mazda RX4                0              0    0.2608888             0 0.03145756
#&gt; Mazda RX4 Wag            0              0    0.2297539             0 0.07066548</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Catherine Hurley, Mark OConnell, Katarina Domijan.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


